

<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/yamljs/0.3.0/yaml.js"></script>

<body>
  
  <div>
  This is a test page
  </div>
  <div class="row">
      <label for="Yaml"> Select your YAML: </label>
      <input type="file" name="Yaml" id="Yaml" accept=".yaml" data-bind="event: { change: function() { uploadYAML($element.files[0]) } }" />
  </div>

</body>

<script>
  function YamlViewModel() {
    var self = this;
    self.baseString=""
        //Knockout obervables, which will be editted by the client, and then used later. 
    self.uploadYAML = function (file){
      f= new FileReader();
      
      f.readAsText(file)
      
      f.onload = function() {
        console.log(f.result);
        self.x=YAML.parse(f.result);
        console.log(self.x);
        b=self.x["bosses"];
        k=Object.keys(b);
        for( i of k){
          a=Object.keys(b[i]);
          for(c of a){
            if(b[i][c]==0){
              delete(b[i][c]);
            }
          }
          a=Object.keys(b[i]);
          if(a.length==1){
            if(a[0]=="On"){
              self.baseString+= i + a[0]
            }
          }
        }
        console.log(b)
        console.log(self.baseString)
      };
      
    }
  }
  ko.applyBindings(new YamlViewModel());
</script>
